---
phase: 01-infrastructure-verification
plan: 02
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: true
user_setup: []

must_haves:
  truths:
    - "LiveKit configuration exists and is valid"
    - "Voice API endpoints exist and are properly structured"
    - "Lead management API routes are functional"
    - "Scripts API routes support CRUD operations"
  artifacts:
    - path: "app/api/voice/realtime/route.ts"
      provides: "Voice realtime API endpoint"
    - path: "app/api/admin/leads/route.ts"
      provides: "Leads API endpoint"
    - path: "app/api/admin/scripts/route.ts"
      provides: "Scripts API endpoint"
    - path: ".planning/phases/01-infrastructure-verification/01-02-SUMMARY.md"
      provides: "API and LiveKit verification results"
---

<objective>
Verify LiveKit infrastructure and API endpoints are functional.

Purpose: Ensure voice and API infrastructure is ready before building features that depend on them.
Output: Verification report documenting API/LiveKit status and any gaps.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md

Call Center Page:
@app/call-center/page.tsx

Voice API:
@app/api/voice/realtime/route.ts

Leads API:
@app/api/admin/leads/route.ts

Scripts API:
@app/api/admin/scripts/route.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify LiveKit configuration</name>
  <files>.env.example, .env.local, lib/voice/</files>
  <action>
  Check LiveKit configuration:
  1. Verify LIVEKIT_URL, LIVEKIT_API_KEY, LIVEKIT_API_SECRET in .env.example
  2. Check lib/voice/ directory for LiveKit client setup
  3. Verify livekit-agent/ Python agent exists with proper structure
  4. Document configuration status and any missing pieces
  </action>
  <verify>grep -l "LIVEKIT" .env.example returns result</verify>
  <done>LiveKit configuration documented</done>
</task>

<task type="auto">
  <name>Task 2: Verify Voice API endpoints</name>
  <files>app/api/voice/</files>
  <action>
  Verify voice API structure:
  1. Check /api/voice/realtime exists - handles real-time voice sessions
  2. Check /api/voice/conversation exists (if applicable)
  3. Document request/response structure
  4. Verify it creates LiveKit tokens properly
  </action>
  <verify>ls app/api/voice/ shows route files</verify>
  <done>Voice API endpoints documented</done>
</task>

<task type="auto">
  <name>Task 3: Verify Leads API endpoints</name>
  <files>app/api/admin/leads/</files>
  <action>
  Verify leads API structure:
  1. GET /api/admin/leads - list leads with filters
  2. POST /api/admin/leads - create lead
  3. GET /api/admin/leads/[id] - get single lead
  4. PATCH /api/admin/leads/[id] - update lead
  5. POST /api/admin/leads/[id]/call - initiate call
  6. POST /api/admin/leads/[id]/sms - send SMS
  7. GET /api/admin/leads/[id]/communications - get history

  For each, document: exists? HTTP methods? request/response structure?
  </action>
  <verify>ls app/api/admin/leads/ shows expected routes</verify>
  <done>Leads API endpoints documented</done>
</task>

<task type="auto">
  <name>Task 4: Verify Scripts API endpoints</name>
  <files>app/api/admin/scripts/</files>
  <action>
  Verify scripts API structure:
  1. GET /api/admin/scripts - list scripts
  2. POST /api/admin/scripts - create script
  3. GET /api/admin/scripts/[id] - get single script
  4. PATCH /api/admin/scripts/[id] - update script
  5. DELETE /api/admin/scripts/[id] - delete script

  Document structure and verify handlers exist.
  </action>
  <verify>ls app/api/admin/scripts/ shows expected routes</verify>
  <done>Scripts API endpoints documented</done>
</task>

<task type="auto">
  <name>Task 5: Create API/LiveKit verification summary</name>
  <files>.planning/phases/01-infrastructure-verification/01-02-SUMMARY.md</files>
  <action>
  Create comprehensive summary documenting:
  - LiveKit: Config status, agent status, client libraries
  - Voice API: Endpoints available, token generation working
  - Leads API: All endpoints with methods supported
  - Scripts API: All endpoints with methods supported
  - Any gaps that need addressing
  - Ready/Not Ready status for Phase 2
  </action>
  <verify>cat .planning/phases/01-infrastructure-verification/01-02-SUMMARY.md exists</verify>
  <done>Summary created with API/LiveKit status</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] LiveKit configuration verified
- [ ] Voice API endpoints documented
- [ ] Leads API endpoints documented
- [ ] Scripts API endpoints documented
- [ ] Summary created with clear status
</verification>

<success_criteria>
- All tasks completed
- API/LiveKit status documented
- Gaps (if any) clearly identified for follow-up
- Clear go/no-go for Phase 2
</success_criteria>

<output>
After completion, create `.planning/phases/01-infrastructure-verification/01-02-SUMMARY.md`
</output>

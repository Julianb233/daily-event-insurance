# Plan 03-04: Call Recording Player

**Phase:** 3 - Lead Management Enhancement
**Status:** PLANNED
**Estimated Complexity:** Low

## Objective

Build audio player component for playing back call recordings in the communication timeline.

## Prerequisites

- Plan 03-01 complete (lead detail page)
- Communication records with recording URLs

## Implementation

### Component to Create

**AudioPlayer Component** (`components/admin/AudioPlayer.tsx`)

Features:
- Play/pause button
- Progress bar (seekable)
- Current time / duration display
- Volume control
- Playback speed (0.5x, 1x, 1.5x, 2x)
- Download button

### Usage in Timeline

```tsx
{communication.callRecordingUrl && (
  <AudioPlayer
    src={communication.callRecordingUrl}
    duration={communication.callDuration}
  />
)}
```

### Styling

- Compact design for timeline cards
- Dark theme compatible
- Loading state for buffering
- Error state for missing recordings

### Implementation

```tsx
// Custom audio player using HTML5 Audio API
const audioRef = useRef<HTMLAudioElement>(null)

function handlePlayPause() {
  if (isPlaying) {
    audioRef.current?.pause()
  } else {
    audioRef.current?.play()
  }
  setIsPlaying(!isPlaying)
}

function handleSeek(e: React.ChangeEvent<HTMLInputElement>) {
  const time = parseFloat(e.target.value)
  if (audioRef.current) {
    audioRef.current.currentTime = time
  }
}
```

## Verification

- [ ] Player renders in timeline
- [ ] Play/pause works correctly
- [ ] Seeking works
- [ ] Duration displays correctly
- [ ] Download works
- [ ] Handles missing recordings gracefully

## Dependencies

- Communication timeline (Plan 03-01)
- Recording URLs from LiveKit

---
*Created: 2025-01-15 | Phase 3: Lead Management Enhancement*
